# nodejs核心模块

> 之前我们介绍了，nodejs中是分模块的，我们在nodejs中需要用的工具包，都是通过引入第三方包模块来完成的，本章，我们将详细介绍nodejs中使用的最多的几种核心模块，并且，通过这几个核心模块的学习，掌握自己去nodejsAPI中学习其它模块的能力



## 一. nodejs中的核心模块介绍

nodejs中使用的最多的核心模块主要有以下几个

- fs：提供对文件的读写等操作
- http：提供了搭建本地服务器的API
- path：提供文件路径操作的API
- os：操作系统相关信息的API
- url：提供了操作URL信息的API



## 二. 核心模块的使用

### 2.1 http 模块

> http模块通常给我们用来创建本地的服务器，我们可以借助该模块提供的API，很轻松的在本地创建自己的服务器，并自己书写服务器的逻辑
>
> 简单的说，就是我们在浏览器输入一个URL地址的时候，就是在向服务器请求数据，服务器接收到URL之后，会执行一系列的逻辑处理，最后返回给我们响应的文件

#### Demo1：

接下来，我们将使用http模块，一步一步的创建我们自己的服务器

1. 创建http-demo文件夹，在该文件夹下创建 server.js文件
2. 引入http 模块
3. 利用http模块对象，创建服务器
4. 监听服务器的请求，当接受的服务器的请求的时候，打印请求的URL地址
5. 指定服务器监听的端口号，指定服务器正常运行的回调函数
6. 在http-demo文件夹下，打开命令行输入 node server.js 启动服务器
7. 在浏览器通过指定的端口号，访问我们的服务器，可以随意输入URL，查看控制台的打印内容

**代码示例：**

~~~js
//1. 引入http模块
const http = require('http')

//2. 通过http对象，创建服务器
const app = http.createServer()

//3. 监听服务器的请求，并打印请求的URL地址
app.on('request',(req,res)=>{
    console.log(req.url)
})

//4. 指定服务器监听的端口号，以及服务器正常启动之后的回调函数
app.listen(3000,()=>{
    console.log('Server is runnin on localhost:3000...')
})
~~~

| 输入                     | 控制台打印 |
| ------------------------ | ---------- |
| localhost:3000           | /          |
| localhost:3000/hello     | /hello     |
| localhost:3000/http-demo | /http-demo |

**完成以上Demo之后，我们可以在该项目的基础上，优化我们的服务器**

#### Demo2：

一般我们访问服务器的时候，服务器会根据我们访问的URL，返回給我们不同的数据文件，接下来我们就来实现这个功能

**实现步骤：**

1. 在Demo的基础上，在服务器的监听函数的回调函数中，通过req参数获取URL
2. 通过对URL的判断，返回不同的数据或者界面
3. 这里需要说明的是，app.on方法的回调函数，接收两个参数，分别包包含请求对象和响应对象的相关信息
   - req：请求对象相关信息
   - res：响应对象相关信息
   - res.end()：该方法可以返回给浏览器指定的内容

~~~js
//1. 引入http模块
const http = require('http')
//2. 通过http对象，创建服务器
const app = http.createServer()


//3. 监听服务器的请求，并打印请求的URL地址
app.on('request',(req,res)=>{
    //5. 获取URL
    var url = req.url
    
    //6. 通过对URL的判断，返回给浏览器不同的信息
    if(url === '/' || url === '/home'){
        res.end('Welcom to login page')
    }else if(url === '/login'){
        res.end('Come to login your accout')
    }else if(url === '/register'){
        res.end('you can Register your accout in there')
    }else{
        res.end('404 Not found...,please try out')
    }
})

//4. 指定服务器监听的端口号，以及服务器正常启动之后的回调函数
app.listen(3000,()=>{
    console.log('Server is runnin on localhost:3000...')
})
~~~

- 完成以上代码之后，使用 `node 文件名` 命令启动服务器，然后我们在浏览器输入URL地址，即可看到如下结果

![](./imgs/http-demo-plus.gif)

看到以上效果，即完成了我们Demo2的练习

**:collision:拓展：**根据不同的URL，返回不同的前端界面，即把文字变成我们的html文件，思考这个该如何实现？



### 2.2 fs  模块